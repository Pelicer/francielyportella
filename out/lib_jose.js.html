<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: lib/jose.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: lib/jose.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Global module
 * @module     lib/jose
 * @file       Global functions and prototypes
 * @version    1.0.0
 * @author     takaki-tk (takaki(at)tk.tec.br)
 * @copyright  TK Technology (c) 2021
 */

/** Prints debug message in NON-PRODUCTION environment
 * @author   takaki-tk (takaki(at)tk.tec.br)
 * @version  1.0.0
 * @param    {String}   msg   Debug msg to be directed to output (console.*)
 * @param    {String}   type  The console output type
 */
exports.debug = ( msg, type = "log" ) => {
    try
    {
        const DEBUG_TYPES = {
            log: console.log,
            error: console.error,
            dir: console.dir
        };

        if( !(type in DEBUG_TYPES) ) throw `The output type ${type} is not supported`;

        if( !(process.env.VERCEL_ENV === "PRODUCTION") )
        {
            if(type === "dir")
            {
                DEBUG_TYPES[ "log" ]( (new Date()).toISOString() );
                DEBUG_TYPES[ type ]( msg );
            } 
            else
            {
                DEBUG_TYPES[ type ]( ( new Date() ).toISOString() + ` ${msg}` );
            }
        }
    }
    catch( err )
    {
        console.error( `*** CRITICAL ERROR ***\nCannot log debug message due the following error: ${err}` );
    }
};

/** Parse a 32 hexadecimal characters into GUID style grouping (without curly brackets)
* @author   takaki-tk (takaki(at)tk.tec.br)
* @version  1.0.0
* @param    {String}   guidString     A sequence of 32 hexadecima characters
* @param    {Boolean}  curlyBrackets  default = false; If true it'll add the curly brackets to the returned string  
* @return   {String}                  GUID style string (XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX), or it'll return 
*                                     the same string in case it's invalid
*/
exports.toGUID = ( guidString, curlyBrackets = false ) =>
{
    try
    {
        if( !guidString.match("[A-Fa-f0-9]{32}") ) throw "Invalid GUID";
        var groups = guidString.match( "([A-Fa-f0-9]{8})([A-Fa-f0-9]{4})([A-Fa-f0-9]{4})([A-Fa-f0-9]{4})([A-Fa-f0-9]{12})");

        return `${( (curlyBrackets) ? "{" : "" )}${groups[ 1 ]}-${groups[ 2 ]}-${groups[ 3 ]}-${groups[ 4 ]}-${groups[ 5 ]}${( (curlyBrackets) ? "}" : "" )}`;
    }
    catch( err )
    {
        console.log(err);
        return guidString.toString();
    }
};

/**
* Parse a GUID string to a 32 hexadecimal characters
* @author   takaki-tk (takaki(at)tk.tec.br)
* @version  1.0.0
* @param    {String}   guidString  GUID string with or without curly brackets
* @return   {String}               Sequencial 32 hexadecimal characters, or it'll return 
*                                   the same string in case it's invalid
*/
exports.fromGUID = ( guidString ) =>
{
    try
    {
        if( !guidString.match("\{?[A-Fa-f0-9-]{36}\}?") ) throw "Invalid GUID";
        return guidString.replaceAll( /[{}-]+/g, "" );
        //var groups = this.match( "([A-Fa-f0-9]{8})-([A-Fa-f0-9]{4})-([A-Fa-f0-9]{4})-([A-Fa-f0-9]{4})-([A-Fa-f0-9]{12})");

        //return `${groups[ 1 ]}${groups[ 2 ]}${groups[ 3 ]}${groups[ 4 ]}${groups[ 5 ]}`;
    }
    catch( err )
    {
        console.log(err);
        return guidString.toString();
    }
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-api_v1_contact.html">api/v1/contact</a></li><li><a href="module-contact_msg.html">contact_msg</a></li><li><a href="module-global.html">global</a></li><li><a href="module-nodemailer.html">nodemailer</a></li></ul><h3>Global</h3><ul><li><a href="global.html#debug">debug</a></li><li><a href="global.html#fromGUID">fromGUID</a></li><li><a href="global.html#toGUID">toGUID</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue Apr 20 2021 20:53:56 GMT-0300 (Brasilia Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
